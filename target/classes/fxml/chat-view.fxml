<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx/11.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.group7.chat.gui.ChatController">
   <top>
      <!-- 菜单栏 -->
      <MenuBar>
         <menus>
            <Menu mnemonicParsing="false" text="文件">
               <items>
                  <MenuItem fx:id="settingsMenuItem" mnemonicParsing="false" text="设置" />
                  <SeparatorMenuItem />
                  <MenuItem mnemonicParsing="false" text="退出" />
               </items>
            </Menu>
            <Menu mnemonicParsing="false" text="连接">
               <items>
                  <MenuItem mnemonicParsing="false" onAction="#handleConnect" text="连接到节点..." />
               </items>
            </Menu>
            <Menu mnemonicParsing="false" text="帮助">
               <items>
                  <MenuItem fx:id="aboutMenuItem" mnemonicParsing="false" text="关于" />
               </items>
            </Menu>
         </menus>
      </MenuBar>
   </top>
   
   <center>
      <!-- 主聊天区域 -->
      <VBox spacing="5.0">
         <children>
            <!-- 状态栏 -->
            <HBox alignment="CENTER_LEFT" spacing="20.0" styleClass="status-bar">
               <children>
                  <Label fx:id="nodeIdLabel" text="节点ID: 未知" />
                  <Label fx:id="connectionCountLabel" text="连接数: 0" />
               </children>
               <padding>
                  <Insets bottom="5.0" left="10.0" right="10.0" top="5.0" />
               </padding>
            </HBox>
            
            <!-- 消息列表 -->
            <ListView fx:id="messageListView" styleClass="message-list" VBox.vgrow="ALWAYS">
               <VBox.margin>
                  <Insets left="5.0" right="5.0" />
               </VBox.margin>
            </ListView>
         </children>
      </VBox>
   </center>
   
   <bottom>
      <!-- 消息输入区域 -->
      <VBox spacing="5.0" styleClass="input-area">
         <children>
            <Separator />
            <HBox alignment="CENTER_LEFT" spacing="10.0">
               <children>
                  <TextArea fx:id="messageInput" prefRowCount="2" promptText="输入消息... (Enter发送, Ctrl+Enter换行)" HBox.hgrow="ALWAYS" />
                  <VBox alignment="CENTER" spacing="5.0">
                     <children>
                        <Button fx:id="sendButton" defaultButton="true" onAction="#handleSendMessage" prefWidth="80.0" text="发送" />
                        <Button fx:id="connectButton" onAction="#handleConnect" prefWidth="80.0" text="连接" />
                     </children>
                  </VBox>
               </children>
               <padding>
                  <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
               </padding>
            </HBox>
         </children>
      </VBox>
   </bottom>
</BorderPane>
